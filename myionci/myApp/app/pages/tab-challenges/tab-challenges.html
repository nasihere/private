<ion-navbar *navbar class="tab-nav">
    <ion-buttons start>
        <button (click)="toggleSearchbar()">
            <ion-icon name="search"></ion-icon>
        </button>
    </ion-buttons>

    <ion-title>Challenges</ion-title>

    <ion-buttons end>
        <button (click)="handleNewChallenge()">
            <span primary>New</span>
        </button>
    </ion-buttons>
</ion-navbar>

<ion-toolbar [attr.primary]="isAndroid ? '' : null" class="challenges-segments">
    <ion-segment [(ngModel)]="challengetype" [attr.light]="isAndroid ? '' : null">
        <ion-segment-button value="all">
            All
        </ion-segment-button>
        <ion-segment-button value="active">
            Active
        </ion-segment-button>
        <ion-segment-button value="open">
            Open
        </ion-segment-button>
        <ion-segment-button value="done">
            Done
        </ion-segment-button>
    </ion-segment>
</ion-toolbar>

<ion-header-bar class="challenge-topinfo">
    <ion-searchbar id="searchBar" [hidden]="hideSearchbar" [(ngModel)]="keyword" (cancel)="userPressedCancel()" (keyup.enter)="keyHasBeenPressed()"></ion-searchbar>

    <!-- Show the Info Bar -->
    <challengeinfobar></challengeinfobar>
</ion-header-bar>

<ion-content class="tab-challenges">

    <!-- Body -->
    <div class="challengephone container">

        <!-- Show the all challenge list -->
        <div [ngSwitch]="challengetype">
            <ion-list *ngSwitchWhen="'all'">
                <div *ngFor="#result of allchallenges; #i = index">
                    <div [ngSwitch]="result.itemtype">
                        <template [ngSwitchWhen]="'challenge'">
                            <challengechallenge [feedinfo]="result"></challengechallenge>
                        </template>
                        <template [ngSwitchWhen]="'inprogress'">
                            <challengeinprogress [feedinfo]="result" [userprofile]="userprofile"></challengeinprogress>
                        </template>
                        <template [ngSwitchWhen]="'completed'">
                            <challengecompleted [feedinfo]="result"></challengecompleted>
                        </template>
                        <template [ngSwitchWhen]="'won'">
                            <challengewon [feedinfo]="result" [userprofile]="userprofile"></challengewon>
                        </template>
                        <template [ngSwitchWhen]="'lost'">
                            <challengelost [feedinfo]="result" [userprofile]="userprofile"></challengelost>
                        </template>
                        <template ngSwitchDefault>
                        </template>
                    </div>
                </div>
            </ion-list>
        </div>
        <!-- Show the active challenge list -->
        <div [ngSwitch]="challengetype">
            <ion-list *ngSwitchWhen="'active'">
                <div *ngFor="#result of activechallenges; #i = index">
                    <div [ngSwitch]="result.itemtype">
                        <template [ngSwitchWhen]="'challenge'">
                            <challengechallenge [feedinfo]="result"></challengechallenge>
                        </template>
                        <template [ngSwitchWhen]="'inprogress'">
                            <challengeinprogress [feedinfo]="result" [userprofile]="userprofile"></challengeinprogress>
                        </template>
                        <template [ngSwitchWhen]="'completed'">
                            <challengecompleted [feedinfo]="result"></challengecompleted>
                        </template>
                        <template [ngSwitchWhen]="'won'">
                            <challengewon [feedinfo]="result" [userprofile]="userprofile"></challengewon>
                        </template>
                        <template [ngSwitchWhen]="'lost'">
                            <challengelost [feedinfo]="result" [userprofile]="userprofile"></challengelost>
                        </template>
                        <template ngSwitchDefault>
                        </template>
                    </div>
                </div>
            </ion-list>
        </div>
        <!-- Show the open (have not accepted) challenge list -->
        <div [ngSwitch]="challengetype">
            <ion-list *ngSwitchWhen="'open'">
                <div *ngFor="#result of openchallenges; #i = index">
                    <div [ngSwitch]="result.itemtype">
                        <template [ngSwitchWhen]="'challenge'">
                            <challengechallenge [feedinfo]="result"></challengechallenge>
                        </template>
                        <template [ngSwitchWhen]="'inprogress'">
                            <challengeinprogress [feedinfo]="result" [userprofile]="userprofile"></challengeinprogress>
                        </template>
                        <template [ngSwitchWhen]="'completed'">
                            <challengecompleted [feedinfo]="result"></challengecompleted>
                        </template>
                        <template [ngSwitchWhen]="'won'">
                            <challengewon [feedinfo]="result" [userprofile]="userprofile"></challengewon>
                        </template>
                        <template [ngSwitchWhen]="'lost'">
                            <challengelost [feedinfo]="result" [userprofile]="userprofile"></challengelost>
                        </template>
                        <template ngSwitchDefault>
                        </template>
                    </div>
                </div>
            </ion-list>
        </div>
        <!-- Show the done/completed challenge list -->
        <div [ngSwitch]="challengetype">
            <ion-list *ngSwitchWhen="'done'">
                <div *ngFor="#result of donechallenges; #i = index">
                    <div [ngSwitch]="result.itemtype">
                        <template [ngSwitchWhen]="'challenge'">
                            <challengechallenge [feedinfo]="result"></challengechallenge>
                        </template>
                        <template [ngSwitchWhen]="'inprogress'">
                            <challengeinprogress [feedinfo]="result" [userprofile]="userprofile"></challengeinprogress>
                        </template>
                        <template [ngSwitchWhen]="'completed'">
                            <challengecompleted [feedinfo]="result"></challengecompleted>
                        </template>
                        <template [ngSwitchWhen]="'won'">
                            <challengewon [feedinfo]="result" [userprofile]="userprofile"></challengewon>
                        </template>
                        <template [ngSwitchWhen]="'lost'">
                            <challengelost [feedinfo]="result" [userprofile]="userprofile"></challengelost>
                        </template>
                        <template ngSwitchDefault>
                        </template>
                    </div>
                </div>
            </ion-list>
        </div>

    </div>

</ion-content>



